---
title: PostgreSQL syntax
---

## PostgreSQL syntax

### Vefforritun

### 칍lafur Sverrir Kjartansson, [osk@hi.is](mailto:osk@hi.is)

---

## Syntax

* Postgres notar SQL me칧 vi칧b칩tum
* D칝mi sem fylgja eru keyr칧 칤 gegnum `psql` og s칳na sv칬r 쬬칧an

***

```sql
-- SQL Athugasemd 칤 einni l칤nu
/*
  SQL athugasemd
  칤 m칬rgum l칤num
*/

-- ; er seg칧aendir
SELECT * FROM table;

-- A칧ger칧ir ekki case sensitive
-- En venja a칧 hafa 칤 UPPERCASE
select * from table;
```

***

## Schema

* Gagnagrunnar innihalda `schema` sem halda utan um t칬flur og a칧ra hluti
* Sj치lfgefi칧 er `public` schema ef vi칧 b칰um ekki til s칠rstaklega

***

## T칬flur

* T칬flur samanstanda af d치lkum og r칬칧um
* D치lkar eru vel skilgreindir me칧 t칳pum, takm칬rkunum og 칳msum 칬칧rum l칳sig칬gnum
* Ra칧ir eru 쬬u g칬gn sem vi칧 b칝tum vi칧 t칬fluna
  * Getum haft t칬flur me칧 engum r칬칧um, upp 칤 tugmilj칩nir e칧a fleiri ra칧ir

***

## B칰a til t칬flu ([create table](https://www.postgresql.org/docs/current/static/sql-createtable.html))

```sql
--    schema 游녢  heiti 游녢
CREATE TABLE public.people (
  id SERIAL PRIMARY KEY,
  name VARCHAR(64) NOT NULL UNIQUE,
  text TEXT,
  registered BOOLEAN DEFAULT FALSE,
  date TIMESTAMP WITH TIME ZONE NOT NULL
    DEFAULT CURRENT_TIMESTAMP
);
```

***

* Getum keyrt skipun a칧 ofan eftir a칧 vi칧 tengjumst me칧 `psql`
* E칧a sko칧a칧 schema me칧 `\d <heiti>`
* Ef vi칧 notum GUI t칩l sko칧um vi칧 t칬flur undir, t.d. pgAdmin:
  * `Schemas > public > tables`
  * E칧a nota칧 query t칩l, h칝gri smella 치 gagnagrunn og `Query Tool`

***

`id SERIAL PRIMARY KEY` b칳r til _primary key_ d치lk sem heitir `id`

* Einstakur fyrir 쬰ssa t칬flu, engar tv칝r ra칧ir hafa sama primary key
* 룟rfum ekki gera neitt 칤 `insert`, h칝kkar sj치lfkrafa

***

`name VARCHAR(64) NOT NULL UNIQUE` b칳r til d치lk `name` me칧 _variable characters_, st칬fum af mismunandi bita lengd, eins og utf8

* Tala 칤 sviga segir til um h치markslengd, 64 stafir 칤 쬰ssu tilfelli
* `NOT NULL`, ver칧um a칧 skilgreina gildi 쬰gar vi칧 b칝tum vi칧 칤 t칬flu
* `UNIQUE`, engar tv칝r ra칧ir mega hafa sama gildi 칤 t칬flu

***

`text TEXT` b칳r til d치lk `text` af t칳punni `TEXT`

* Getur haldi칧 utan um texta af hva칧a lengd sem er
* Gott fyrir texta sem vi칧 vitum ekki hve langur getur or칧i칧
* Sl칝mt fyrir d치lka sem vi칧 viljum b칰a til _indexa_ fyrir
* M치 vera t칩mt, f치um 쮂 `NULL`

***

`registered BOOLEAN DEFAULT FALSE` b칳r til d치lk `registered` af t칳punni `BOOLEAN`

* Getur veri칧 `true` e칧a `false`, ekkert anna칧
* `DEFAULT FALSE` leyfir okkur a칧 sleppa 쭀칤 a칧 tiltaka 쬰gar vi칧 b칝tum vi칧 r칬칧, ver칧ur sj치lfgefi칧 `false`

***

`date TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP` b칳r til d치lk `date`

* T칳pa er `TIMESTAMP WITH TIME ZONE`, dagst칤mi _me칧 time zone_
* Sj치lfgefi칧 er 쬬칧 _n칰na_, s치 t칤mi sem r칬칧 er b칝tt vi칧
* Gott a칧 geyma me칧 r칬칧um, s칠rstaklega 쬰gar vi칧 erum a칧 taka vi칧 fr치 notendum
